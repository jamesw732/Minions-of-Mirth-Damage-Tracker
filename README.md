# Minions of Mirth Reborn DPS Calc
This program records real-time data on the damage dealt by a given player and uses solely the state of the game log file (client\logs\game.txt file). This file is updated once a certain number of lines have been sent to the game window, I believe it's around 10 lines, and upon each game log update, more damage data is collected. This approach is probably the only one that a third-party program will be able to achieve, however there are some limitations to it that will be important to understand in order to use this program.
## How To Use
To use this program, clone this whole repo and then simply run main.py. If you don't know how to use git clone or don't have Python installed, then you can probably just download DamageTracker.exe and run that, but I don't know how portable .exe files are, especially to non-Windows operating systems. I only included a copy of it on the repo as sort of a last case scenario.  
Either way, once you're in the GUI, you'll have to put some information in the three top left entries:
1. The name of the character or mob which you wish to track the damage of.  
2. The global path to the relevant game.txt file. Example: C:\Windows\Program Files\MomReborn\client\logs\game.txt.  
3. The third entry labeled "Threshold" establishes a time threshold (in seconds) such that if the time between two hits by the tracked player is greater than that threshold, then the damage tracking resets. This is desirable because long waits between fights will not paint a good picture of your damage and we'd rather just ignore the first fight before the pause. By default, this is 10 seconds, and if you wish to completely disable it, simply input a large number.  
Once you have settings that you want to keep, click "Save Settings", this will create a settings.txt file which the program will read from now on to provide default values in the entry fields. Allowing for multiple saved settings presets is a potential future improvement, but unfortunately you may only save a single set of settings currently.  
Otherwise, "Start" begins a new damage tracking period, and "Stop" stops it. It will be pretty obvious that you're in a damage tracking period because the entries will become disabled (to prevent editing them while running, which could break things) and a "Tracking DPS" indicator will replace the "Not Tracking" one. Clicking "Save Data" will write the current contents of the GUI to a local file called damagedata.txt. No formatting is done, it's just the name and raw numbers. May be preferable to use a .csv instead of a .txt here.

## Some Notes on Use
- The time is based off of the difference in time between your first tracked hit and your last tracked hit based on the log timestamps. It was a tough choice between this and just using real time, but with the inactivity timer, I think this is better due to the unreliability of log updates. With this, at least the program will be correct about your DPS, just slowly, while with real time, it will never be correct.
- The accuracy of the program is pretty dependent on the rate of lines entering the game window. The more lines, the more accurate the game log is to the actual state of the game, and thus the input to the program is more accurate. 
- One potential flaw is that you kill a mob but there are a few lines of damage that didn't go through. In this case, pop a couple /who's and this should force a game.txt update, and your damage data (even the time) should be completely fine.
- I hypothesize that there are some player names that can break this program. There are two semi-realistic ones that I can think of: if your name has "for" in it as a separate word, ie "\_ for \_", this program is just not going to work - it works normally if "for" is in your name but not as a separate word. Additionally, if your name is a word-for-word subname of your opponent's name, ie you're fighting Himmorlian Chask on a toon named Himmorlian, both of your damages will be counted towards the same cause. I haven't tested either of these hypotheses, but these were drawbacks that I expected before writing the code.
- I believe the single player log file is the same as the multiplayer log file, but I'm not certain.
- The min hit and avg hit stats are a little bit useless since kicks and archery are a thing. But still, I figure there's no point in excluding them. It's probably better than unused space, anyways.
- Haven't tested on any non-Windows OS. I don't imagine it failing, but if it does, please let me know.